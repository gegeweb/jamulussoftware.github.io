<!DOCTYPE html><!--[if IE 9]><html class="ie9"><![endif]--><html lang="fr"><head><title>Trucs et astuces Jamulus – Script bash d'installation pour Linux – Wiki de Jamulus</title><meta charset="utf-8"/><link rel="alternate" hreflang="en" href="https://jamulus.io/wiki/Linux-Client-Install-Script"/><link rel="alternate" hreflang="es" href="https://jamulus.io/es/wiki/Linux-Client-Install-Script"/><link rel="alternate" hreflang="de" href="https://jamulus.io/de/wiki/Linux-Client-Install-Script"/><link rel="alternate" hreflang="it" href="https://jamulus.io/it/wiki/Linux-Client-Install-Script"/><link rel="alternate" hreflang="fr" href="https://jamulus.io/fr/wiki/Linux-Client-Install-Script"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="stylesheet" href="/assets/css/fox.min.css"/><link rel="stylesheet" href="/assets/css/fw.css"/><noscript><link rel="stylesheet" href="/assets/css/noscript.css"/></noscript><link rel="apple-touch-icon" sizes="57x57" href="/fr/apple-icon-57x57.png"/><link rel="apple-touch-icon" sizes="60x60" href="/fr/apple-icon-60x60.png"/><link rel="apple-touch-icon" sizes="72x72" href="/fr/apple-icon-72x72.png"/><link rel="apple-touch-icon" sizes="76x76" href="/fr/apple-icon-76x76.png"/><link rel="apple-touch-icon" sizes="114x114" href="/fr/apple-icon-114x114.png"/><link rel="apple-touch-icon" sizes="120x120" href="/fr/apple-icon-120x120.png"/><link rel="apple-touch-icon" sizes="144x144" href="/fr/apple-icon-144x144.png"/><link rel="apple-touch-icon" sizes="152x152" href="/fr/apple-icon-152x152.png"/><link rel="apple-touch-icon" sizes="180x180" href="/fr/apple-icon-180x180.png"/><link rel="icon" type="image/png" sizes="192x192" href="/fr/android-icon-192x192.png"/><link rel="icon" type="image/png" sizes="32x32" href="/fr/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/fr/favicon-96x96.png"/><link rel="icon" type="image/png" sizes="16x16" href="/fr/favicon-16x16.png"/><link rel="manifest" href="/manifest.json"/><meta name="msapplication-TileColor" content="#ffffff"/><meta name="msapplication-TileImage" content="/ms-icon-144x144.png"/><meta name="theme-color" content="#ffffff"/><meta name="color-scheme" content="dark light"/><link rel="author" href="/humans.txt"/><script src="/assets/js/nav.js"></script><link rel="stylesheet" href="/assets/css/wiki.css"><meta name="description" content=""></head><body class="wikisite"><header class="fx-row fx-row-between-xs fx-text-center"><div class="fx-col fx-text-center"><a href="/fr/"><img alt="Icône de Jamulus. Redirige vers la page d'accueil du Wiki." width="40" height="40" src="/assets/img/jamulus-icon-2020.svg"/></a></div><div class="fx-col-center-xs fx-txt-right hide-on-dt"><a href="#mnv" onclick="showNav();return false;"><svg role="img" width="20" height="20" aria-labelledby="ntitle" id="navbtn" class="hide-on-dt"><title id="ntitle">Premier pasr</title><g><rect fill="currentcolor" id="r1" width="100%" height="3" x="0" y="0"/><rect fill="currentcolor" id="r2" width="100%" height="3" x="0" y="8"/><rect fill="currentcolor" id="r3" width="100%" height="3" x="0" y="16"/></g></svg></a></div></header><div class="fx-row fx-row-center-xs"><aside id="gnav" class="fx-col-100-xs fx-col-25-m"><div id="langselect"><div lang="en" id="suglang">This site might also be available in your native language. Select your preferred language below:</div><ul><li><a href=" /wiki/Linux-Client-Install-Script" data-slang="en">en</a></li><li><a href="/es/wiki/Linux-Client-Install-Script" data-slang="es">es</a></li><li><a href="/de/wiki/Linux-Client-Install-Script" data-slang="de">de</a></li><li><a href="/it/wiki/Linux-Client-Install-Script" data-slang="it">it</a></li><li class="selected" data-slang="fr">fr</li></ul></div><nav id="mnv"><ul><li><h3>Utiliser Jamulus</h3><ul><li><a href="/fr/wiki/Getting-Started" class="">Premier pas</a><ul><li><a href="/fr/wiki/Installation-for-Windows" class="">Windows</a></li><li><a href="/fr/wiki/Installation-for-Macintosh" class="">Macintosh</a></li><li><a href="/fr/wiki/Installation-for-Linux" class="">Linux</a></li></ul></li><li><a href="/fr/wiki/Software-Manual" class="">Manuel du logiciel</a></li><li><a href="/fr/wiki/Client-Troubleshooting" class="">Problèmes potentiels</a></li></ul></li><li><h3>En savoir plus</h3><ul><li><a href="/fr/wiki/Running-a-Server" class="">Administrer un serveur</a></li><li><a href="/fr/wiki/Command-Line-Options" class="">Configuration</a></li><li><a href="/fr/wiki/Tips-Tricks-More" class="">Trucs et astuces</a></li><li><a href="/fr/wiki/Demos" class="">Démonstrations</a></li><li><a href="/fr/wiki/Privacy-Statement" class="">Déclaration de confidentialité</a></li></ul></li></ul></nav></aside><div id="maincontainer" class="fx-col-100-xs fx-col-50-m"><noscript class="red"><strong>JavaScript est désactivé sur votre navigateur. Il n'y a aucun problème à ça. Ce site a été créé de manière à fournir les fonctionnalités basiques sans JS. Activer Javascript vous permettrait d'accéder à des fonctionnalités supplémentaires de ce site.</strong></noscript><main lang="fr"><h1 id="script-bash-pour-télécharger-et-compiler-sous-linux">Script bash pour télécharger et compiler sous Linux</h1><p>Si vous prévoyez d’installer Jamulus sur plusieurs machines Linux, vous pourrier avoir envie d’essayer ce script.</p><p>L’exemple suivant a été testé sous Linux Mint et combine toutes les commandes ci-dessus en un seul script pour Ubuntu/Linux Mint. Pour pouvoir incorporer les différentes commandes des distributions Linux, des variables définissent la distribution et la version pour lesquelles ce script d’installation pourrait être utilisé. L’exemple utilise Ubuntu version 18.04 comme référence. Ainsi le nom suggéré pour le script est, par ex., <code class="language-plaintext highlighter-rouge">install4ubuntu18_4.sh</code>. Les commandes du script sont génériques afin que l’installation puisse être modifiée pour fonctionner avec d’autres distributions.</p><h3 id="installation-en-fonction-de-la-distribution-linux">Installation en fonction de la distribution Linux</h3><p>Le script suivant appelle différentes commandes d’installation en fonction de la distribution Linux. La variable <code class="language-plaintext highlighter-rouge">DISTRO</code> définie quelles commandes sont exécutées. Paramétrez la variable en fonction de la distribution Linux que vous utilisez :</p><ul><li><code class="language-plaintext highlighter-rouge">DISTRO="Ubuntu"</code> pour une Ubuntu ou Linux Mint</li><li><code class="language-plaintext highlighter-rouge">DISTRO="Debian"</code> pour une Debian ou Raspian Linux</li><li><code class="language-plaintext highlighter-rouge">DISTRO="Fedora"</code> pour une Fedora Linux</li></ul><p>D’autre part si l’installation est dépendante de la version, la variable <code class="language-plaintext highlighter-rouge">LINVERSION</code> a été introduite mais n’est pour l’instant pas utilisée. Dans la déclaration <code class="language-plaintext highlighter-rouge">if</code> pour Ubuntu il y a un exemple de la façon dont les appels d’installation en fonction de la version peuvent être utilisés.</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$LINVERSION</span><span class="s2">"</span>  <span class="o">=</span> <span class="s2">"18.4"</span> <span class="o">]</span>
<span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"Perform Installation Specifics for </span><span class="nv">$DISTRO</span><span class="s2"> Version </span><span class="nv">$DISTRO</span><span class="s2">"</span> 
<span class="k">fi</span>  
</code></pre></div></div><p>La variable <code class="language-plaintext highlighter-rouge">LINVERSION</code> n’est pas actuellement utilisée dans le script suivant, c’est juste une démonstration sur la manière dont les commandes d’installation spécifiques à une version peuvent être utilisées.</p><h3 id="adaptation-du-script-dinstallation">Adaptation du script d’installation</h3><p>Si vous voulez créer un script d’installation pour Debian, copiez simplement le script <code class="language-plaintext highlighter-rouge">install4ubuntu18_4.sh</code> en le renommant <code class="language-plaintext highlighter-rouge">install4debian10_6.sh</code> et modifez la varable distro :</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/sh</span>
<span class="c"># set DISTRO either to "Ubuntu", "Debian" or "Fedora"</span>
<span class="nv">DISTRO</span><span class="o">=</span><span class="s2">"Debian"</span>
<span class="nv">LINVERSION</span><span class="o">=</span><span class="s2">"10.6"</span>
</code></pre></div></div><p>Ensuite, testez l’installation sous Debian et modifiez les commandes pour que le script d’installation fonctionne sous Debian. Partagez, s’il vous plait, vos scripts d’installation fonctionnels sur ce Wiki. Le responsable du dépôt pourrait y ajouter un répertoire <code class="language-plaintext highlighter-rouge">/install_scripts</code> pour les scripts d’installation fonctionnels. Créez une demande de fusion pour votre nouveau script d’installation ou ouvrez une « issue » pour demander l’ajout du script documenté et testé dans ce dépôt.</p><h3 id="le-script-dinstallation">Le script d’installation</h3><p>Copiez le script d’installation suivant dans un ficher et sauvegardez le avec le nom <code class="language-plaintext highlighter-rouge">install4ubuntu18_4.sh</code>. Après avoir sauvegardé ce fichier dans, par ex., votre répertoire <code class="language-plaintext highlighter-rouge">Téléchargements</code>, placez vous dans ce répertoire et appelez le script suivant avec <code class="language-plaintext highlighter-rouge">sh install4ubuntu18_4.sh</code>.</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/sh</span>
<span class="c"># set DISTRO either to "Ubuntu", "Debian" or "Fedora"</span>
<span class="nv">DISTRO</span><span class="o">=</span><span class="s2">"Ubuntu"</span>
<span class="nv">LINVERSION</span><span class="o">=</span><span class="s2">"18.04"</span>

<span class="c"># Get Jamulus Release Name with "curl" and "grep"  </span>
<span class="nv">R</span><span class="o">=</span><span class="sb">`</span>curl <span class="nt">-s</span> https://api.github.com/repos/corrados/jamulus/releases/latest | <span class="nb">grep</span> <span class="nt">-oP</span> <span class="s1">'"tag_name": "\K(.*)(?=")'</span><span class="sb">`</span> 
<span class="nb">echo</span> <span class="s2">"Jamulus Installation Script for </span><span class="nv">$DISTRO</span><span class="s2"> </span><span class="nv">$LINVERSION</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Release: </span><span class="nv">$R</span><span class="s2">"</span>
<span class="nv">INSTALLJAMULUS</span><span class="o">=</span><span class="s2">"no"</span>
<span class="k">while </span><span class="nb">true</span><span class="p">;</span> <span class="k">do
    </span><span class="nb">read</span> <span class="nt">-p</span> <span class="s2">"Do you wish to install Jamulus on </span><span class="nv">$DISTRO</span><span class="s2"> </span><span class="nv">$LINVERSION</span><span class="s2">? (y/n) "</span> yn
    <span class="k">case</span> <span class="nv">$yn</span> <span class="k">in</span>
        <span class="o">[</span>Yy]<span class="k">*</span> <span class="p">)</span> 
           <span class="nb">echo</span> <span class="s2">"Start Installation </span><span class="nv">$DISTRO</span><span class="s2"> </span><span class="nv">$LINVERSION</span><span class="s2">"</span>
           <span class="nb">echo</span> <span class="s2">"(1) Fetch Release </span><span class="nv">$R</span><span class="s2"> from GitHub"</span>
           wget https://github.com/corrados/jamulus/archive/<span class="nv">$R</span>.tar.gz 
           <span class="nb">echo</span> <span class="s2">"(2) Extract Source Code for Jamulus Release </span><span class="nv">$R</span><span class="s2"> from GitHub"</span>
           <span class="nb">tar</span> <span class="nt">-xvf</span> <span class="nv">$R</span>.tar.gz
           <span class="nb">echo</span> <span class="s2">"(3) Delete </span><span class="k">${</span><span class="nv">R</span><span class="k">}</span><span class="s2">.tar.gz from GitHub"</span>
           <span class="nb">rm</span> <span class="nv">$R</span>.tar.gz
           <span class="nb">echo</span> <span class="s2">"(4) Update Repository"</span>
           <span class="nb">sudo </span>apt-get update
           <span class="nv">INSTALLJAMULUS</span><span class="o">=</span><span class="s2">"yes"</span> 
           <span class="nb">break</span><span class="p">;;</span>
        <span class="o">[</span>Nn]<span class="k">*</span> <span class="p">)</span> 
           <span class="nb">echo</span> <span class="s2">"Cancelled Jamulus Installation on </span><span class="nv">$DISTRO</span><span class="s2"> </span><span class="nv">$LINVERSION</span><span class="s2">"</span>
           <span class="nb">exit</span><span class="p">;;</span>
        <span class="k">*</span> <span class="p">)</span> <span class="nb">echo</span> <span class="s2">"Please answer yes or no."</span><span class="p">;;</span>
    <span class="k">esac</span>
<span class="k">done</span>

<span class="c"># echo "Check Variable: $INSTALLJAMULUS"</span>
	
<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$INSTALLJAMULUS</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"yes"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then     
	</span><span class="nb">echo</span> <span class="s2">"(5) Install Build Essentials for </span><span class="nv">$DISTRO</span><span class="s2">"</span>
	
	<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$DISTRO</span><span class="s2">"</span>  <span class="o">=</span> <span class="s2">"Ubuntu"</span> <span class="o">]</span>
	<span class="k">then  
		      </span><span class="nb">echo</span> <span class="s2">"Installation for </span><span class="nv">$DISTRO</span><span class="s2">"</span> 
		      <span class="nb">sudo </span>apt-get <span class="nb">install </span>cmake qmake gcc g++ 
		      <span class="nb">sudo </span>apt-get <span class="nb">install </span>build-essential qt5-qmake qtdeclarative5-dev qt5-default qttools5-dev-tools libjack-jackd2-dev 
		      <span class="nb">sudo </span>apt-get <span class="nb">install </span>qjackctl
                      <span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$LINVERSION</span><span class="s2">"</span>  <span class="o">=</span> <span class="s2">"18.4"</span> <span class="o">]</span>
                      <span class="k">then
                          </span><span class="nb">echo</span> <span class="s2">"Perform Installation Specifics for </span><span class="nv">$DISTRO</span><span class="s2"> Version </span><span class="nv">$DISTRO</span><span class="s2">"</span> 
                      <span class="k">fi  
	
  	elif</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$DISTRO</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"Debian"</span> <span class="o">]</span>
	<span class="k">then    
			  </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>build-essential qtdeclarative5-dev qt5-default qttools5-dev-tools libjack-jackd2-dev 
			  <span class="nb">sudo </span>apt-get <span class="nb">install </span>qjackctl
	<span class="k">elif</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$DISTRO</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"Fedora"</span> <span class="o">]</span>
	<span class="k">then    
			  </span><span class="nb">sudo </span>dnf <span class="nb">install </span>qt5-qtdeclarative-devel jack-audio-connection-kit-dbus jack-audio-connection-kit-devel 
			  <span class="nb">sudo </span>dnf <span class="nb">install </span>qjackctl
	<span class="k">fi
           
	</span><span class="nb">echo</span> <span class="s2">"(6) Compile Jamulus </span><span class="nv">$R</span><span class="s2">"</span>
	<span class="nb">echo</span> <span class="s2">"Change to Directory jamulus-</span><span class="nv">$R</span><span class="s2">"</span> 
	<span class="nb">cd</span> <span class="s2">"jamulus-</span><span class="nv">$R</span><span class="s2">"</span>
	<span class="c"># ls</span>
	qmake Jamulus.pro
	make clean
        make
        <span class="nb">sudo </span>make <span class="nb">install
        echo</span> <span class="s2">"Compilation DONE"</span>
        <span class="nb">cd</span> ..
        <span class="nb">echo</span> <span class="s2">"(6) Delete the Source Files after Installation"</span>
        <span class="nb">rm</span> <span class="nt">-R</span> <span class="s2">"jamulus-</span><span class="nv">$R</span><span class="s2">"</span>
           
<span class="k">else

	</span><span class="nb">echo</span> <span class="s2">"Installation cancelled"</span>

<span class="k">fi</span>

</code></pre></div></div><h2 id="améliorations-possibles-du-script-dinstallation-pour-jamulus">Améliorations possibles du script d’installation pour Jamulus</h2><p>Le script peut, au tout début, demander pour quelle distribution Linux il doit être appelé.<br/> Ça peut être testé avec la commande <code class="language-plaintext highlighter-rouge">lsb_release</code>.</p><p>Avec la commande <code class="language-plaintext highlighter-rouge">lsb_release</code> qui retourne les informations spécifiques à la distribution sous Linux. <br/> Avec la commande <code class="language-plaintext highlighter-rouge">grep</code> et en utilisant des expressions rationnelles pour les variables <code class="language-plaintext highlighter-rouge">DISTRO</code> et <code class="language-plaintext highlighter-rouge">LINVERSION</code>.<br/> Par ex., un système basé sur Unbuntu retourne les informations suivantes avec cette commande :</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>lsb_release <span class="nt">-a</span>
No LSB modules are available.
Distributor ID: Ubuntu
Description:    Ubuntu 11.04
Release:        11.04
Codename:       natty
</code></pre></div></div><p>La problématique est que la commande <code class="language-plaintext highlighter-rouge">lsb_release</code> doit être disponible sur le système Linux. Pour les systèmes basés sur CentOS ou Fedora la commande <code class="language-plaintext highlighter-rouge">lsb_release</code> n’est disponible que si les paquets de base <code class="language-plaintext highlighter-rouge">lsb</code> sont installés. La détection automatique de la version de Linux pourrait donc ne pas fonctionner.</p><p>En conséquence, obtenir les valeurs de <code class="language-plaintext highlighter-rouge">DISTRO</code> et <code class="language-plaintext highlighter-rouge">LINVERION</code> avec la commande <code class="language-plaintext highlighter-rouge">read</code> serait la meilleure amélioration en fonction de la distribution plutôt que d’automatiser la configuration avec <code class="language-plaintext highlighter-rouge">lsb_release</code>.</p></main><div id="editsitecontent"><a href="https://github.com/jamulussoftware/jamulussoftware.github.io/edit/changes/wiki/fr/fr-Linux-Install-Script.md" target="_blank" rel="noopener noreferrer"><svg aria-labelledby="etitle" width="20" height="20" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><title id="etitle">Modifier ce site</title><path fill="currentcolor" d="M888 1184l116-116-152-152-116 116v56h96v96h56zm440-720q-16-16-33 1l-350 350q-17 17-1 33t33-1l350-350q17-17 1-33zm80 594v190q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h832q63 0 117 25 15 7 18 23 3 17-9 29l-49 49q-14 14-32 8-23-6-45-6h-832q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113v-126q0-13 9-22l64-64q15-15 35-7t20 29zm-96-738l288 288-672 672h-288v-288zm444 132l-92 92-288-288 92-92q28-28 68-28t68 28l152 152q28 28 28 68t-28 68z"/></svg></a></div><div id="ftext" class="fx-txt-center"><p><strong>Été 2020 ! Parlez nous de Jamulus - <a href="https://forms.gle/hSSjsxjWj2Pnp5kr7">répondez à notre sondage anonyme ! (en anglais)</a></strong></p><p>Cette documentation est sous <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.fr" target="_blank" rel="noreferrer">licence Creative Commons</a>. Voulez-vous <a href="Contribution">contribuer</a> ?</p></div></div></div><footer class="fx-row fx-row-around-xs" id="footer"><div class="fx-col-100-xs fx-col-33-s fx-col-center-xs"><a href="https://github.com/corrados/jamulus" target="_blank" rel="noreferrer"><img src="/assets/img/github.svg" alt="Dépôt GitHub de Jamulus" loading="lazy" class="fx-center"/></a></div><div class="fx-col-100-xs fx-col-33-s fx-col-center-xs"><a href="https://www.facebook.com/groups/619274602254947/" target="_blank" rel="noreferrer"><img src="/assets/img/facebook.svg" alt="Groupe Facebook de Jamulus" id="fb_icon" loading="lazy" class="fx-center"/></a></div><div class="fx-col-100-xs fx-col-33-s fx-col-center-xs"><a href="https://sourceforge.net/projects/llcon" target="_blank" rel="noreferrer"><img src="https://sourceforge.net/sflogo.php?type=17&amp;group_id=158367" alt="Télécharger Jamulus sur SourceForge.net. Téléchargements rapides et sécurisés de logiciels open-source" class="fx-center" id="sflogo"/></a></div><div id="copyright" class="fx-col-100-xs fx-row-center-xs"> Créé par <a href="https://github.com/corrados" target="_blank" rel="noreferrer">Volker Fischer</a> et <a href="https://github.com/corrados/jamulus/graphs/contributors" target="_blank" rel="noreferrer">les contributeurs</a></div></footer><script>var ja=window.navigator.language||window.navigator.userLanguage,mu=document.documentElement.lang,lus=["en","es","de","it","fr"],regex=RegExp("^"+mu);regex.test(ja)||lus.forEach(function(e){ja.match("^"+e)&&(document.getElementById("langselect").classList.add("chlang","red"),document.getElementById("suglang").style.display="block",document.querySelectorAll("[data-slang="+e+"]")[0].classList.add("proplang"))});</script></body></html>